<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panther Chatroom</title>

    <!-- LINKS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.7.0/moment.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="assets/style.css" rel="stylesheet">
</head>

<body>
    <style>
        body {
            background-color: rgb(13, 6, 104);
        }
        .mainroomContent {
            width: 300px;
            text-align: center;
            margin: 0 auto;
            margin-top: 10vh;
        }

    </style>



        <div class="mainroomContent">
            
          <img src="assets/Panther-Chatroom-Logo.gif" class="navLinks" style=width:300px;/>

          <h5 id="uName" class="navLinks" style="color: white;">Welcome insert username here</h5>
        
          <a><button id="random" onclick="goToChat()" class="btn btn-danger btn-sm mt-5 mb-3">Start Chat</button></a>
          <a href="./friends.html" class="sidebtn navLinks">View Friends</a>
        <a><button onclick="goToProfile()" class="btn btn-danger btn-sm mt-2 mb-2">View
                    Profile</button></a>
          <a href="./index.html" class="leavebtn navLinks">Logout</a>
          
            
     
        </div>


        <script src="/socket.io/socket.io.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.9.6/qs.min.js"
            integrity="sha512-3TmPrquYLaAsUmZKXRARTDC5siWhLAdBVqNo4dWpDABBtLU62AaoTaQJEvjxjExcZYurO6i1dnK85k8pPIBlRg=="
            crossorigin="anonymous"></script>
        <script src="js/main.js"></script>

        <script>
            
            var name = document.getElementById('uName').innerHTML
            // var roomChoice = Math.round(Math.random() * 100)
            document.getElementById('random').addEventListener('click', function () {
                var roomChoice = Math.round(Math.random() * 100)
                socket.on('new room', newRoom => {
                    roomChoice = newRoom
                    console.log('roomChoice:', roomChoice)
                })
                console.log('roomChoice:', roomChoice)

                window.document.location = '/randomchat.html' + '?username=' + name + '&room=' + roomChoice;
                // joinedRoom()
            })

            function printNameonWelcome() {
                // setTimeout(()=>{closeNav()}, 3000)

                const { username } = Qs.parse(location.search, {
                    ignoreQueryPrefix: true
                })
                console.log(username)
                document.getElementById('uName').innerHTML = username
            }
            printNameonWelcome()
            function goToChat() {

                const { username } = Qs.parse(location.search, {
                    ignoreQueryPrefix: true
                })
                var roomChoice = Math.round(Math.random() * 100)
                socket.on('new room', newRoom => {
                    roomChoice = newRoom
                    console.log('roomChoice:', roomChoice)
                })
                console.log('roomChoice:', roomChoice)

                window.document.location = '/randomchat.html' + '?username=' + username + '&room=' + roomChoice;
            }
            function goToProfile() {
                const { username } = Qs.parse(location.search, {
                    ignoreQueryPrefix: true
                })
                console.log('trying to go', username)
                window.document.location = '/profile.html' + '?username=' + username;
            }

        </script>

</body>

</html>
